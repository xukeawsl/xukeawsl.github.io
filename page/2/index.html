<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>NumPy's Blog</title><meta name="author" content="NumPy,xukeawsl@gmail.com"><meta name="copyright" content="NumPy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="NumPy&#39;s Blog">
<meta property="og:url" content="https://xukeawsl.gitee.io/page/2/index.html">
<meta property="og:site_name" content="NumPy&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/11/23/kxpMnNjGaOhZews.jpg">
<meta property="article:author" content="NumPy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/11/23/kxpMnNjGaOhZews.jpg"><link rel="shortcut icon" href="/img/N.png"><link rel="canonical" href="https://xukeawsl.gitee.io/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'NumPy\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: undefined,
  isToc: false,
  postUpdate: '2023-06-19 21:16:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><script src="/live2d-widget/autoload.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/11/23/kxpMnNjGaOhZews.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">29</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">9</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/img/background.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">NumPy's Blog</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">NumPy's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/xukeawsl" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xukeawsl@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/02/28/MySQL%E7%AC%94%E8%AE%B0/" title="MySQL笔记">     <img class="post_bg" src="https://s2.loli.net/2022/02/28/a2HsQGWDpOkJvUg.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL笔记"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/28/MySQL%E7%AC%94%E8%AE%B0/" title="MySQL笔记">MySQL笔记</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-02-28T13:00:47.000Z" title="Created 2022-02-28 21:00:47">2022-02-28</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-05-16T09:31:20.687Z" title="Updated 2022-05-16 17:31:20">2022-05-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/mysql/">mysql</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/mysql/">mysql</a></span></div><div class="content">MySQL 笔记1. 数据库操作# 创建数据库
CREATE DATABASE MySQL;

# 选择数据库
USE MySQL;

# 查看数据库
SHOW DATABASES;

# 查看当前数据库的表
SHOW TABLES;

# 显示创建特定数据库或表的语句
SHOW CREATE DATABASE MySQL;
SHOW CREATE TABLE tb;

# 显示授予用户的安全权限
SHOW GRANTS;

# 显示服务器错误或警告消息
SHOW ERRORS;
SHOW WARNINGS;



2. 表操作2.1 创建和操纵表# 创建表 (IF NOT EXISTS 会先检查是否有重复表名)
CREATE TABLE IF NOT EXISTS customers
(
  cust_id      int       NOT NULL AUTO_INCREMENT,	# 每个表只允许一个 AUTO_INCREMENT
  cust_name    char(50)  NOT NULL ,
  cust_address char(50)  NULL ,
  cust ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/17/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-14-%E5%B8%B8%E8%A7%81%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98/" title="操作系统笔记(14)-常见并发问题">     <img class="post_bg" src="https://s2.loli.net/2021/12/17/dkYCtz4wel2sWcV.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(14)-常见并发问题"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/17/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-14-%E5%B8%B8%E8%A7%81%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98/" title="操作系统笔记(14)-常见并发问题">操作系统笔记(14)-常见并发问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-17T06:01:36.000Z" title="Created 2021-12-17 14:01:36">2021-12-17</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-17T07:20:19.649Z" title="Updated 2021-12-17 15:20:19">2021-12-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(14)-常见并发问题简介
常见的并发程序缺陷主要有两种：非死锁缺陷 和 死锁缺陷

非死锁缺陷
非死锁缺陷主要又分为两种：违反原子性缺陷 和 错误顺序缺陷

违反原子性缺陷
违反原子性的定义是：违反了多次内存访问中预期的可串行性（即代码段本意是原子的，但是在执行中并没有强制实现原子性）

T0:
    if (ptr != NULL) &#123;
        doSomething(ptr);
    &#125;

T1:
    ptr = NULL;


若线程 T0 正要执行 doSomething 之前切换到 T1 执行，将 ptr 置为 NULL ，再切回 T0 会导致程序崩溃


解决方法 : 在代码前后添加互斥锁，避免线程切换
违反顺序缺陷
违反顺序的定义是：两个内存访问的预期顺序打破了（即 A 应该在 B 之前执行，但是实际运行中却不是这个顺序）

T0: 
    void init() &#123;
        ptr = CreatePtr(mMain, ...);
    &#125;

T1:
    void mMain(...) ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/16/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-13-%E4%BF%A1%E5%8F%B7%E9%87%8F/" title="操作系统笔记(13)-信号量">     <img class="post_bg" src="https://s2.loli.net/2021/12/16/nAQHBqDNpaiKPsr.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(13)-信号量"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/16/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-13-%E4%BF%A1%E5%8F%B7%E9%87%8F/" title="操作系统笔记(13)-信号量">操作系统笔记(13)-信号量</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-16T10:16:52.000Z" title="Created 2021-12-16 18:16:52">2021-12-16</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-16T11:55:51.489Z" title="Updated 2021-12-16 19:55:51">2021-12-16</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(13)-信号量简介
信号量是另一种提供线程同步的方式，可以使用信号量作为锁和条件变量

POSIX 信号量 API#include &lt;semaphore.h>

// 初始化信号量
// 1. sem_t 变量
// 2. pshared 为0表示这个信号量是当前进程的局部信号量, 否则该信号量可以在多个进程之间共享
// 3. value 指定信号量初始值
int sem_init(sem_t* sem, int pshared, unsigned int value);

// 销毁信号量
int sem_destroy(sem_t* sem);

// 以原子操作的方式将信号量的值减一。 减完后信号量的值若小于0，就等待至信号量大于等于0
int sem_wait(sem_t* sem);

// 始终立即返回, 当信号量为0时返回-1并设置errno
int sem_trywait(sem_t* sem);

// 原子地将信号量加一
int sem_post(sem_t* sem);

信号量充当互斥锁
将信号量的初始值设置为 1 即可

#include ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-12-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F/" title="操作系统笔记(12)-条件变量">     <img class="post_bg" src="https://s2.loli.net/2021/12/15/E9ygNxjYrG7LkzF.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(12)-条件变量"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/15/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-12-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F/" title="操作系统笔记(12)-条件变量">操作系统笔记(12)-条件变量</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-15T08:00:04.000Z" title="Created 2021-12-15 16:00:04">2021-12-15</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-15T09:03:16.549Z" title="Updated 2021-12-15 17:03:16">2021-12-15</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(12)-条件变量简介
在很多情况下，线程需要检查某一条件满足之后，才会继续运行，比如说主线程可以等待子线程执行完后再继续执行

条件变量可以令线程在条件 未满足 时进入 睡眠 ，也支持在任务完成后 唤醒 另外的线程

pthread_cond_wait 调用之前必须持有锁，因为它会释放锁然后使线程进入 cond 等待队列，当使用 pthread_cond_signal 或 pthread_cond_broadcast 时，会将线程从 cond 队列移动到 mutex 队列，再次获取锁后执行相关任务


父线程等待子线程：使用条件变量
利用 条件变量 实现父线程等待子线程
  #include &lt;stdio.h>
#include &lt;stdlib.h>
#include &lt;pthread.h>
#include &lt;unistd.h>

int done = 0;

// 另一种初始化的方式
pthread_cond_t c = PTHREAD_COND_INITIALIZER;
pthread_mutex_t m = PTHREAD_MUTEX_IN ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/13/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-11-%E9%94%81/" title="操作系统笔记(11)-锁">     <img class="post_bg" src="https://s2.loli.net/2021/12/14/1tV8675rGRXkS42.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(11)-锁"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/13/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-11-%E9%94%81/" title="操作系统笔记(11)-锁">操作系统笔记(11)-锁</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-13T12:12:56.000Z" title="Created 2021-12-13 20:12:56">2021-12-13</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-14T13:19:55.581Z" title="Updated 2021-12-14 21:19:55">2021-12-14</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(11)-锁简介
上一个笔记介绍了 POSIX 提供的互斥锁 API ，我们知道了在进入临界区前加锁，能够保证临界区能够像单条原子指令一样执行

评价锁评价一个锁主要从三个方面来看:

提供互斥 ：锁需要提供的最基本功能

公平性 ：确保每一个竞争线程有公平的机会获得锁

性能 ：使用锁之后的性能如何（在各种环境下）


实现一个锁测试并设置指令（原子交换）
早期由硬件支持的 原子 交换指令，即 测试并设置（test-and-set） ，它的逻辑实现如下：
  // 硬件保证此操作是原子的, x86 为 xchg 指令
int TestAndSet(int *old_ptr, int new_value) &#123;
    int old = *old_ptr;
    *old_ptr = new_value;
    return old;
&#125;
实现一个 自旋锁
  typedef struct lock_t &#123;
    int flag;
&#125; lock_t;

void init(lock_t *lock) &#123;
    lo ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-10-%E5%B9%B6%E5%8F%91/" title="操作系统笔记(10)-并发">     <img class="post_bg" src="https://s2.loli.net/2021/12/09/VO3XJGKafgNnUbd.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(10)-并发"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/09/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-10-%E5%B9%B6%E5%8F%91/" title="操作系统笔记(10)-并发">操作系统笔记(10)-并发</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-09T10:25:00.000Z" title="Created 2021-12-09 18:25:00">2021-12-09</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-09T12:02:21.861Z" title="Updated 2021-12-09 20:02:21">2021-12-09</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(10)-并发简介
操作系统除了支持多进程之外，对单个运行的进程也提供了多任务运行的支持，即 线程，每个 线程 类似于独立的进程，与多进程不同的是，它们之间 共享地址空间，从而能够访问相同的数据。另一个不同的地方在于 栈，单线程中只有一个栈而多线程中每个线程都有一个栈

每个线程都有自己的一组用于计算的寄存器，因此，如果在单核机器上运行两个线程，从一个线程切换到另一个线程时，必定发生 上下文切换

线程的 上下文切换 类似于进程的 上下文切换，需要一个或多个 线程控制块（TCB） 来保存每个线程的状态


共享数据的难点
使用 多线程 访问共享数据时，很容易产生一个问题就是当多个线程访问同一个地址空间时会出现 竞态，到底谁先访问谁后访问，很多时候可能会产生不同的结果，也因此有了一些并发术语：

临界区（critical section） : 是访问共享资源的一段代码，资源通常是一个变量或数据结构

竞态条件（race condition） : 出现在多个执行线程大致同时进入临界区时，它们都试图更新共享的数据结构，导致了令人惊讶的结果

不确定性（indeterminate） ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/08/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-9-%E8%B6%85%E8%B6%8A%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98-%E6%9C%BA%E5%88%B6%E4%B8%8E%E7%AD%96%E7%95%A5/" title="操作系统笔记(9)-超越物理内存:机制与策略">     <img class="post_bg" src="https://s2.loli.net/2021/12/08/doq3xzX1evhWGgZ.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(9)-超越物理内存:机制与策略"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/08/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-9-%E8%B6%85%E8%B6%8A%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98-%E6%9C%BA%E5%88%B6%E4%B8%8E%E7%AD%96%E7%95%A5/" title="操作系统笔记(9)-超越物理内存:机制与策略">操作系统笔记(9)-超越物理内存:机制与策略</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-08T10:55:51.000Z" title="Created 2021-12-08 18:55:51">2021-12-08</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-08T13:07:00.321Z" title="Updated 2021-12-08 21:07:00">2021-12-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(9)-超越物理内存:机制与策略简介
如果我们需要支持许多同时运行的巨大地址空间，仅仅靠 多级页表 是不够的，我们还需要在内存层级上再加一层

为了支持更大的地址空间，操作系统需要把当前没有在用的那部分地址空间找个地方存储起来，硬盘 通常能够满足这个需求，多道程序的出现，强烈要求能够换出一些页，因为早期的机器显然不能将所有进程需要的所有页同时放在内存中

我们要做的第一件事情就是在硬盘上开辟一部分空间用于 物理页 的移入和移出，一般在操作系统中，这样的空间称为 交换空间，因为我们将内存中的页交换到其中，并在需要的时候又交换回去


存在位
通过之前的机制，我们知道页表项 PTE 中含有一些位，其中的 存在位 的作用就是标识此页是在物理内存还是硬盘中，访问不在物理内存中的页，这种行为通常被称为 页错误（page fault）

页错误
不论在哪种系统中，如果页不存在，都由操作系统负责处理 页错误，操作系统的 页错误处理程序 确定要做什么

如果一个页不存在，它已被交换到磁盘，在处理 页错误 的时候，操作系统需要将该页交换到内存中，而要找到其在硬盘中的哪个位置，就需要用到 PT ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/07/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-8-%E5%A4%9A%E7%BA%A7%E9%A1%B5%E8%A1%A8/" title="操作系统笔记(8)-多级页表">     <img class="post_bg" src="https://s2.loli.net/2021/12/07/QvWGFyAOscNUpb4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(8)-多级页表"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/07/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-8-%E5%A4%9A%E7%BA%A7%E9%A1%B5%E8%A1%A8/" title="操作系统笔记(8)-多级页表">操作系统笔记(8)-多级页表</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-07T12:45:38.000Z" title="Created 2021-12-07 20:45:38">2021-12-07</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-24T05:34:31.392Z" title="Updated 2021-12-24 13:34:31">2021-12-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(8)-多级页表简介
假设一个 32 位地址空间（2^32 字节），4KB （2^12 字节）的页大小和 4B 的页表项大小，那么每个进程需要用来维护页表的内存就是 4 * 2^20B 也就是 4MB，当多个进程运行时，页表占用的空间就会非常大！

为了解决这个问题，提出了 多级页表 ，它的思想是将页表分成 页大小 的 单元，如果一整块 单元 的页表项无效，就完全不分配该页的页表，为了追踪页表的页是否有效，引入了一个新的数据结构叫 页目录（PD），它可以告诉你页表的页在哪里或者页表的整个页不包含有效页

可以看到，多级页表 的工作方式就是让线性页表的一部分消失（因为实际运行的程序中可能会有很多单元无效），就相当于将原来的一大张页表拆分成很多小的，用一个 页目录 来映射这些 小页表，如果某个小页表中的所有项都是无效的，就不分配这页的内存，如下图所示：
  

上图就是 二级页表 结构，每一个 有效 的 页目录项（PDE） 都对应这一张含 有效 页表项的页表，可以大大节省空间，但是这样会产生额外的内存引用开销，因此 多级页表 是一个时间——空间折中


详细示例
设想一个大小为 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/07/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-7-%E5%BF%AB%E9%80%9F%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2/" title="操作系统笔记(7)-快速地址转换">     <img class="post_bg" src="https://s2.loli.net/2021/12/07/UFgmhRoLKp635b1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(7)-快速地址转换"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/07/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-7-%E5%BF%AB%E9%80%9F%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2/" title="操作系统笔记(7)-快速地址转换">操作系统笔记(7)-快速地址转换</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-07T11:41:23.000Z" title="Created 2021-12-07 19:41:23">2021-12-07</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-12-07T14:12:00.096Z" title="Updated 2021-12-07 22:12:00">2021-12-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(7)-快速地址转换简介
使用分页作为核心来实现虚拟内存，可能会带来较高的性能开销：额外的 内存引用

为了改善这个问题，我们需要硬件的帮助，它的名字叫 地址转换旁路缓冲存储器（translation-lookaside buffer），简称 TLB，也可以叫它 地址转换缓存

TLB 在处理器核心附近，设计的访问速度很快


TLB 的工作原理
对每次内存访问，硬件先检查 TLB ，看看其中是否有期望的转换映射，如果有，就完成转换（很快），不用访问页表。因此 TLB 带来了巨大的性能提升

算法流程如下：

从虚拟地址中 提取页号（VPN）

检查 TLB 中是否有该 VPN 对应的物理帧号 PFN

如果有，TLB 命中，转换成功

如果没有，TLB 未命中，硬件就访问 页表 来寻找地址映射

用找到的映射来更新 TLB




谁来处理 TLB 未命中
早期的硬件有复杂指令集，可以全权处理 TLB 未命中，然后去遍历 页表 找到对应的地址映射（如 x86 架构）

更现代的体系结构都是精简指令集计算机，通过软件管理 TLB，发生 TLB 未命中时，硬件系统会抛出一个异 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/06/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-6-%E5%88%86%E9%A1%B5/" title="操作系统笔记(6)-分页">     <img class="post_bg" src="https://s2.loli.net/2021/12/06/qMmvuhdbw6gEkBY.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统笔记(6)-分页"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/06/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0-6-%E5%88%86%E9%A1%B5/" title="操作系统笔记(6)-分页">操作系统笔记(6)-分页</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-06T07:45:38.000Z" title="Created 2021-12-06 15:45:38">2021-12-06</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-09-24T13:02:28.938Z" title="Updated 2022-09-24 21:02:28">2022-09-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/os/">os</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/os/">os</a></span></div><div class="content">操作系统笔记(6)-分页简介
将空间切成不同长度的分片以后，空间本身会 碎片化（fragmented），随着时间推移，分配内存会变得比较困难

因此，出现了另一种叫作 分页 思想: 将空间分割成 固定 长度的分片，每个单元称为一页

相应地，把物理内存看成是定长槽块的阵列，叫做 页帧（page frame），每个这样的 页帧 包含一个虚拟内存页


如何映射到真实的物理地址
接下来，我们关心如何将虚拟页映射到物理页，首先为了记录地址空间的每个虚拟页放在物理内存中的位置，操作系统通常为每个进程保存了一个数据结构，称为 页表（page table）


页表 的主要作用是为地址空间的每个虚拟页面保存 地址转换，从而让我们知道每个页在物理内存中的位置


假设单页的大小为 16B ，以一个 64B 的虚拟地址和一个 128B 的物理地址为例，它们的 页表 和 页帧 分布如下图:

  

我们可以用一个 6 位的二进制数来表示虚拟地址(2^6 = 64)，由于分为了 4 页，我们可以用高两位来表示地址属于哪一页，也叫 虚拟页面号，然后用剩余四位来表示当先页的 偏移量（offset）


如图 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/11/23/kxpMnNjGaOhZews.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">NumPy</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">29</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">9</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">9</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xukeawsl/"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xukeawsl" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xukeawsl@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/06/19/Nginx%E8%87%AA%E6%97%8B%E9%94%81/" title="Nginx自旋锁"><img src="https://s2.loli.net/2023/06/04/xNRnJCVFOkhDfM6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx自旋锁"/></a><div class="content"><a class="title" href="/2023/06/19/Nginx%E8%87%AA%E6%97%8B%E9%94%81/" title="Nginx自旋锁">Nginx自旋锁</a><time datetime="2023-06-19T13:15:07.000Z" title="Created 2023-06-19 21:15:07">2023-06-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/17/Nginx%E5%BE%AA%E7%8E%AF%E9%93%BE%E8%A1%A8/" title="Nginx循环链表"><img src="https://s2.loli.net/2023/06/04/xNRnJCVFOkhDfM6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx循环链表"/></a><div class="content"><a class="title" href="/2023/06/17/Nginx%E5%BE%AA%E7%8E%AF%E9%93%BE%E8%A1%A8/" title="Nginx循环链表">Nginx循环链表</a><time datetime="2023-06-17T09:26:41.000Z" title="Created 2023-06-17 17:26:41">2023-06-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/16/Nginx%E9%93%BE%E8%A1%A8/" title="Nginx单向链表"><img src="https://s2.loli.net/2023/06/04/xNRnJCVFOkhDfM6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx单向链表"/></a><div class="content"><a class="title" href="/2023/06/16/Nginx%E9%93%BE%E8%A1%A8/" title="Nginx单向链表">Nginx单向链表</a><time datetime="2023-06-16T14:04:01.000Z" title="Created 2023-06-16 22:04:01">2023-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/11/Nginx%E7%BC%93%E5%86%B2%E5%8C%BA/" title="Nginx缓冲区"><img src="https://s2.loli.net/2023/06/04/xNRnJCVFOkhDfM6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx缓冲区"/></a><div class="content"><a class="title" href="/2023/06/11/Nginx%E7%BC%93%E5%86%B2%E5%8C%BA/" title="Nginx缓冲区">Nginx缓冲区</a><time datetime="2023-06-11T14:01:20.000Z" title="Created 2023-06-11 22:01:20">2023-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/08/Nginx%E6%95%B0%E7%BB%84/" title="Nginx数组"><img src="https://s2.loli.net/2023/06/04/xNRnJCVFOkhDfM6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx数组"/></a><div class="content"><a class="title" href="/2023/06/08/Nginx%E6%95%B0%E7%BB%84/" title="Nginx数组">Nginx数组</a><time datetime="2023-06-08T13:35:58.000Z" title="Created 2023-06-08 21:35:58">2023-06-08</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/gdb/"><span class="card-category-list-name">gdb</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/hexo/"><span class="card-category-list-name">hexo</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/mysql/"><span class="card-category-list-name">mysql</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/nginx/"><span class="card-category-list-name">nginx</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/oracle/"><span class="card-category-list-name">oracle</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/os/"><span class="card-category-list-name">os</span><span class="card-category-list-count">14</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/socket/"><span class="card-category-list-name">socket</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/hexo/" style="font-size: 1.15em; color: rgb(41, 24, 133)">hexo</a><a href="/tags/nginx/" style="font-size: 1.35em; color: rgb(188, 120, 113)">nginx</a><a href="/tags/oracle/" style="font-size: 1.15em; color: rgb(54, 135, 19)">oracle</a><a href="/tags/vim/" style="font-size: 1.25em; color: rgb(196, 33, 187)">vim</a><a href="/tags/os/" style="font-size: 1.45em; color: rgb(140, 118, 122)">os</a><a href="/tags/C/" style="font-size: 1.15em; color: rgb(25, 44, 40)">C++</a><a href="/tags/gdb/" style="font-size: 1.15em; color: rgb(48, 13, 131)">gdb</a><a href="/tags/mysql/" style="font-size: 1.15em; color: rgb(96, 2, 119)">mysql</a><a href="/tags/socket/" style="font-size: 1.15em; color: rgb(3, 147, 121)">socket</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">June 2023</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">December 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/09/"><span class="card-archive-list-date">September 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/05/"><span class="card-archive-list-date">May 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">February 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">December 2021</span><span class="card-archive-list-count">12</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">November 2021</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">29</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2021-11-24T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">85.9k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-06-19T13:16:24.642Z"></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/background.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By NumPy</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "永不言弃,Nerver give up".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: false,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '永不言弃'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>